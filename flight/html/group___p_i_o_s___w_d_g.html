<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.6"/>
<title>dRonin: Watchdog Functions</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="icon_128x128.png"/></td>
  <td style="padding-left: 0.5em;">
   <div id="projectname">dRonin
   &#160;<span id="projectnumber">2589251</span>
   </div>
   <div id="projectbrief">dRonin&nbsp;firmware</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.6 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('group___p_i_o_s___w_d_g.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Data Structures</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Macros</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(10)"><span class="SelectionMark">&#160;</span>Groups</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(11)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#files">Files</a> &#124;
<a href="#define-members">Macros</a> &#124;
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">Watchdog Functions<div class="ingroups"><a class="el" href="group___p_i_o_s.html">PIOS Core hardware abstraction layer</a></div></div>  </div>
</div><!--header-->
<div class="contents">

<p>PIOS Comamnds to initialize and clear watchdog timer.  
<a href="#details">More...</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="files"></a>
Files</h2></td></tr>
<tr class="memitem:pios__wdg_8h"><td class="memItemLeft" align="right" valign="top">file &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="pios__wdg_8h.html">pios_wdg.h</a></td></tr>
<tr class="memdesc:pios__wdg_8h"><td class="mdescLeft">&#160;</td><td class="mdescRight">SPI functions header. <br/></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:gacd60ab53b5ec9cc9f2732f233783df4e"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___p_i_o_s___w_d_g.html#gacd60ab53b5ec9cc9f2732f233783df4e">PIOS_WDG_ACTUATOR</a>&#160;&#160;&#160;0x0001</td></tr>
<tr class="separator:gacd60ab53b5ec9cc9f2732f233783df4e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gacfa5aa6d5a386978305b3414d53766ba"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___p_i_o_s___w_d_g.html#gacfa5aa6d5a386978305b3414d53766ba">PIOS_WDG_STABILIZATION</a>&#160;&#160;&#160;0x0002</td></tr>
<tr class="separator:gacfa5aa6d5a386978305b3414d53766ba"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga2a144a73b10a9457613b2d81bfc309c6"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___p_i_o_s___w_d_g.html#ga2a144a73b10a9457613b2d81bfc309c6">PIOS_WDG_ATTITUDE</a>&#160;&#160;&#160;0x0004</td></tr>
<tr class="separator:ga2a144a73b10a9457613b2d81bfc309c6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gae4ef7bf1e30f15798fd614ed0c7ba5fd"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___p_i_o_s___w_d_g.html#gae4ef7bf1e30f15798fd614ed0c7ba5fd">PIOS_WDG_MANUAL</a>&#160;&#160;&#160;0x0008</td></tr>
<tr class="separator:gae4ef7bf1e30f15798fd614ed0c7ba5fd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gacf486906223201d5f03105351d5ea280"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___p_i_o_s___w_d_g.html#gacf486906223201d5f03105351d5ea280">PIOS_WDG_SENSORS</a>&#160;&#160;&#160;0x0010</td></tr>
<tr class="separator:gacf486906223201d5f03105351d5ea280"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ga1ffcba6811cce798c0a6bc014a691dc7"><td class="memItemLeft" align="right" valign="top">uint16_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___p_i_o_s___w_d_g.html#ga1ffcba6811cce798c0a6bc014a691dc7">PIOS_WDG_Init</a> ()</td></tr>
<tr class="memdesc:ga1ffcba6811cce798c0a6bc014a691dc7"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initialize the watchdog timer for a specified timeout.  <a href="#ga1ffcba6811cce798c0a6bc014a691dc7">More...</a><br/></td></tr>
<tr class="separator:ga1ffcba6811cce798c0a6bc014a691dc7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga181128f13ffdec27ea07e13fc4a4e1ab"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___p_i_o_s___w_d_g.html#ga181128f13ffdec27ea07e13fc4a4e1ab">PIOS_WDG_RegisterFlag</a> (uint16_t flag_requested)</td></tr>
<tr class="memdesc:ga181128f13ffdec27ea07e13fc4a4e1ab"><td class="mdescLeft">&#160;</td><td class="mdescRight">Register a module against the watchdog.  <a href="#ga181128f13ffdec27ea07e13fc4a4e1ab">More...</a><br/></td></tr>
<tr class="separator:ga181128f13ffdec27ea07e13fc4a4e1ab"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga4698d93015624e320b5c7c980c4edecd"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___p_i_o_s___w_d_g.html#ga4698d93015624e320b5c7c980c4edecd">PIOS_WDG_UpdateFlag</a> (uint16_t <a class="el" href="msp__messages_8h.html#a8fac2498fe5bd106b35d43af5bc91f6f">flag</a>)</td></tr>
<tr class="memdesc:ga4698d93015624e320b5c7c980c4edecd"><td class="mdescLeft">&#160;</td><td class="mdescRight">Function called by modules to indicate they are still running.  <a href="#ga4698d93015624e320b5c7c980c4edecd">More...</a><br/></td></tr>
<tr class="separator:ga4698d93015624e320b5c7c980c4edecd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga0cb157cf1f3763126ab097d9bf67658b"><td class="memItemLeft" align="right" valign="top">uint16_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___p_i_o_s___w_d_g.html#ga0cb157cf1f3763126ab097d9bf67658b">PIOS_WDG_GetBootupFlags</a> ()</td></tr>
<tr class="memdesc:ga0cb157cf1f3763126ab097d9bf67658b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns the flags that were set at bootup.  <a href="#ga0cb157cf1f3763126ab097d9bf67658b">More...</a><br/></td></tr>
<tr class="separator:ga0cb157cf1f3763126ab097d9bf67658b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga725a2e6282c5cb3c63d5c022204aec22"><td class="memItemLeft" align="right" valign="top">uint16_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___p_i_o_s___w_d_g.html#ga725a2e6282c5cb3c63d5c022204aec22">PIOS_WDG_GetActiveFlags</a> ()</td></tr>
<tr class="memdesc:ga725a2e6282c5cb3c63d5c022204aec22"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns the currently active flags.  <a href="#ga725a2e6282c5cb3c63d5c022204aec22">More...</a><br/></td></tr>
<tr class="separator:ga725a2e6282c5cb3c63d5c022204aec22"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga49f0e0259a9db3551d437e5d74fd48a1"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___p_i_o_s___w_d_g.html#ga49f0e0259a9db3551d437e5d74fd48a1">PIOS_WDG_Clear</a> (void)</td></tr>
<tr class="memdesc:ga49f0e0259a9db3551d437e5d74fd48a1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Clear the watchdog timer.  <a href="#ga49f0e0259a9db3551d437e5d74fd48a1">More...</a><br/></td></tr>
<tr class="separator:ga49f0e0259a9db3551d437e5d74fd48a1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga692449b58990433ee694b2c82151480a"><td class="memItemLeft" align="right" valign="top">static bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___p_i_o_s___w_d_g.html#ga692449b58990433ee694b2c82151480a">PIOS_WDG_Check</a> ()</td></tr>
<tr class="memdesc:ga692449b58990433ee694b2c82151480a"><td class="mdescLeft">&#160;</td><td class="mdescRight">This function returns true if the watchdog would have expired.  <a href="#ga692449b58990433ee694b2c82151480a">More...</a><br/></td></tr>
<tr class="separator:ga692449b58990433ee694b2c82151480a"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:gaab238daf4f2906dc7691f92d408cee6c"><td class="memItemLeft" align="right" valign="top">unsigned int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___p_i_o_s___w_d_g.html#gaab238daf4f2906dc7691f92d408cee6c">wdg_registered_flags</a></td></tr>
<tr class="separator:gaab238daf4f2906dc7691f92d408cee6c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga37fde3d7139a4739308ac7a214dbe965"><td class="memItemLeft" align="right" valign="top">unsigned int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___p_i_o_s___w_d_g.html#ga37fde3d7139a4739308ac7a214dbe965">wdg_updated_flags</a></td></tr>
<tr class="separator:ga37fde3d7139a4739308ac7a214dbe965"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaad5cc53775aac9ab18240ee4dec36b8b"><td class="memItemLeft" align="right" valign="top">uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___p_i_o_s___w_d_g.html#gaad5cc53775aac9ab18240ee4dec36b8b">wdg_cleared_time</a></td></tr>
<tr class="separator:gaad5cc53775aac9ab18240ee4dec36b8b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga5616f0e41f5d938c7f1c4c490582bcfe"><td class="memItemLeft" align="right" valign="top">uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___p_i_o_s___w_d_g.html#ga5616f0e41f5d938c7f1c4c490582bcfe">wdg_last_update_time</a></td></tr>
<tr class="separator:ga5616f0e41f5d938c7f1c4c490582bcfe"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga50e5c0c02e49b9be478e347b82eb7f2f"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___p_i_o_s___w_d_g.html#ga50e5c0c02e49b9be478e347b82eb7f2f">wdg_expired</a></td></tr>
<tr class="separator:ga50e5c0c02e49b9be478e347b82eb7f2f"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<p>PIOS Comamnds to initialize and clear watchdog timer. </p>
<h2 class="groupheader">Macro Definition Documentation</h2>
<a class="anchor" id="gacd60ab53b5ec9cc9f2732f233783df4e"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define PIOS_WDG_ACTUATOR&#160;&#160;&#160;0x0001</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="pios__wdg_8h_source.html#l00035">35</a> of file <a class="el" href="pios__wdg_8h_source.html">pios_wdg.h</a>.</p>

</div>
</div>
<a class="anchor" id="ga2a144a73b10a9457613b2d81bfc309c6"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define PIOS_WDG_ATTITUDE&#160;&#160;&#160;0x0004</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="pios__wdg_8h_source.html#l00037">37</a> of file <a class="el" href="pios__wdg_8h_source.html">pios_wdg.h</a>.</p>

</div>
</div>
<a class="anchor" id="gae4ef7bf1e30f15798fd614ed0c7ba5fd"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define PIOS_WDG_MANUAL&#160;&#160;&#160;0x0008</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="pios__wdg_8h_source.html#l00038">38</a> of file <a class="el" href="pios__wdg_8h_source.html">pios_wdg.h</a>.</p>

</div>
</div>
<a class="anchor" id="gacf486906223201d5f03105351d5ea280"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define PIOS_WDG_SENSORS&#160;&#160;&#160;0x0010</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="pios__wdg_8h_source.html#l00039">39</a> of file <a class="el" href="pios__wdg_8h_source.html">pios_wdg.h</a>.</p>

</div>
</div>
<a class="anchor" id="gacfa5aa6d5a386978305b3414d53766ba"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define PIOS_WDG_STABILIZATION&#160;&#160;&#160;0x0002</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="pios__wdg_8h_source.html#l00036">36</a> of file <a class="el" href="pios__wdg_8h_source.html">pios_wdg.h</a>.</p>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="ga692449b58990433ee694b2c82151480a"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static bool PIOS_WDG_Check </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>This function returns true if the watchdog would have expired. </p>

<p>Definition at line <a class="el" href="posix_2pios__wdg_8c_source.html#l00155">155</a> of file <a class="el" href="posix_2pios__wdg_8c_source.html">pios_wdg.c</a>.</p>

</div>
</div>
<a class="anchor" id="ga49f0e0259a9db3551d437e5d74fd48a1"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void PIOS_WDG_Clear </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Clear the watchdog timer. </p>
<p>This function must be called at the appropriate delay to prevent a reset event occuring </p>

<p>Definition at line <a class="el" href="posix_2pios__wdg_8c_source.html#l00147">147</a> of file <a class="el" href="posix_2pios__wdg_8c_source.html">pios_wdg.c</a>.</p>

</div>
</div>
<a class="anchor" id="ga725a2e6282c5cb3c63d5c022204aec22"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint16_t PIOS_WDG_GetActiveFlags </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Returns the currently active flags. </p>
<p>For external monitoring</p>
<dl class="section return"><dt>Returns</dt><dd>The active flags register </dd></dl>

<p>Definition at line <a class="el" href="posix_2pios__wdg_8c_source.html#l00137">137</a> of file <a class="el" href="posix_2pios__wdg_8c_source.html">pios_wdg.c</a>.</p>

</div>
</div>
<a class="anchor" id="ga0cb157cf1f3763126ab097d9bf67658b"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint16_t PIOS_WDG_GetBootupFlags </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Returns the flags that were set at bootup. </p>
<p>This is used for diagnostics, if only one flag not set this was likely the module that wasn't running before reset</p>
<dl class="section return"><dt>Returns</dt><dd>The active flags register from bootup </dd></dl>

<p>Definition at line <a class="el" href="posix_2pios__wdg_8c_source.html#l00125">125</a> of file <a class="el" href="posix_2pios__wdg_8c_source.html">pios_wdg.c</a>.</p>

</div>
</div>
<a class="anchor" id="ga1ffcba6811cce798c0a6bc014a691dc7"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint16_t PIOS_WDG_Init </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Initialize the watchdog timer for a specified timeout. </p>
<p>It is important to note that this function returns the achieved timeout for this hardware. For hardware indendence this should be checked when scheduling updates. Other hardware dependent details may need to be considered such as a window time which sets a minimum update time, and this function should return a recommended delay for clearing.</p>
<p>For the STM32 nominal clock rate is 32 khz, but for the maximum clock rate of 60 khz and a prescalar of 4 yields a clock rate of 15 khz. The delay that is set in the watchdog assumes the nominal clock rate, but the delay for FreeRTOS to use is 75% of the minimal delay.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">delayMs</td><td>The delay period in ms </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Maximum recommended delay between updates</dd></dl>
<p>It is important to note that this function returns the achieved timeout for this hardware. For hardware independence this should be checked when scheduling updates. Other hardware dependent details may need to be considered such as a window time which sets a minimum update time, and this function should return a recommended delay for clearing.</p>
<p>For the STM32 nominal clock rate is 32 khz, but for the maximum clock rate of 60 khz and a prescaler of 4 yields a clock rate of 15 khz. The delay that is set in the watchdog assumes the nominal clock rate, but the delay for RTOS to use is 75% of the minimal delay.</p>
<dl class="section return"><dt>Returns</dt><dd>Maximum recommended delay between updates based on PIOS_WATCHDOG_TIMEOUT constant </dd></dl>

<p>Definition at line <a class="el" href="posix_2pios__wdg_8c_source.html#l00063">63</a> of file <a class="el" href="posix_2pios__wdg_8c_source.html">pios_wdg.c</a>.</p>

</div>
</div>
<a class="anchor" id="ga181128f13ffdec27ea07e13fc4a4e1ab"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool PIOS_WDG_RegisterFlag </td>
          <td>(</td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>flag_requested</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Register a module against the watchdog. </p>
<p>There are two ways to use PIOS WDG: this is for when multiple modules must be monitored. In this case they must first register against the watchdog system and only when all of the modules have been updated with the watchdog be cleared. Each module must have its own bit in the 16 bit</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">flag</td><td>the bit this module wants to use </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>True if that bit is unregistered </dd></dl>

<p>Definition at line <a class="el" href="posix_2pios__wdg_8c_source.html#l00086">86</a> of file <a class="el" href="posix_2pios__wdg_8c_source.html">pios_wdg.c</a>.</p>

</div>
</div>
<a class="anchor" id="ga4698d93015624e320b5c7c980c4edecd"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool PIOS_WDG_UpdateFlag </td>
          <td>(</td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>flag</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Function called by modules to indicate they are still running. </p>
<p>This function will set this flag in the active flags register (which is a backup regsiter) and if all the registered flags are set will clear the watchdog and set only this flag in the backup register</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">flag</td><td>the flag to set </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>true if the watchdog cleared, false if flags are pending </dd></dl>

<p>Definition at line <a class="el" href="posix_2pios__wdg_8c_source.html#l00102">102</a> of file <a class="el" href="posix_2pios__wdg_8c_source.html">pios_wdg.c</a>.</p>

</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a class="anchor" id="gaad5cc53775aac9ab18240ee4dec36b8b"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint32_t wdg_cleared_time</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="posix_2pios__wdg_8c_source.html#l00039">39</a> of file <a class="el" href="posix_2pios__wdg_8c_source.html">pios_wdg.c</a>.</p>

</div>
</div>
<a class="anchor" id="ga50e5c0c02e49b9be478e347b82eb7f2f"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool wdg_expired</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="posix_2pios__wdg_8c_source.html#l00042">42</a> of file <a class="el" href="posix_2pios__wdg_8c_source.html">pios_wdg.c</a>.</p>

</div>
</div>
<a class="anchor" id="ga5616f0e41f5d938c7f1c4c490582bcfe"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint32_t wdg_last_update_time</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="posix_2pios__wdg_8c_source.html#l00040">40</a> of file <a class="el" href="posix_2pios__wdg_8c_source.html">pios_wdg.c</a>.</p>

</div>
</div>
<a class="anchor" id="gaab238daf4f2906dc7691f92d408cee6c"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">unsigned int wdg_registered_flags</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="posix_2pios__wdg_8c_source.html#l00037">37</a> of file <a class="el" href="posix_2pios__wdg_8c_source.html">pios_wdg.c</a>.</p>

</div>
</div>
<a class="anchor" id="ga37fde3d7139a4739308ac7a214dbe965"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">unsigned int wdg_updated_flags</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="posix_2pios__wdg_8c_source.html#l00038">38</a> of file <a class="el" href="posix_2pios__wdg_8c_source.html">pios_wdg.c</a>.</p>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.6 </li>
  </ul>
</div>
</body>
</html>
