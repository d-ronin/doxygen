<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.6"/>
<title>dRonin: TxPID Module</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="icon_128x128.png"/></td>
  <td style="padding-left: 0.5em;">
   <div id="projectname">dRonin
   &#160;<span id="projectnumber">ba4f099</span>
   </div>
   <div id="projectbrief">dRonin&nbsp;firmware</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.6 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('group___tx_p_i_d_module.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Data Structures</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Macros</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(10)"><span class="SelectionMark">&#160;</span>Groups</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(11)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#files">Files</a> &#124;
<a href="#nested-classes">Data Structures</a> &#124;
<a href="#define-members">Macros</a> &#124;
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">TxPID Module<div class="ingroups"><a class="el" href="group___tau_labs_modules.html">Tau Labs Modules</a></div></div>  </div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="files"></a>
Files</h2></td></tr>
<tr class="memitem:txpid_8c"><td class="memItemLeft" align="right" valign="top">file &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="txpid_8c.html">txpid.c</a></td></tr>
<tr class="memdesc:txpid_8c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Optional module to tune PID settings using R/C transmitter. <br/></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structtxpid__struct.html">txpid_struct</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:gafde0a91566f74d38cdffe80c6635576d"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___tx_p_i_d_module.html#gafde0a91566f74d38cdffe80c6635576d">SAMPLE_PERIOD_MS</a>&#160;&#160;&#160;200</td></tr>
<tr class="separator:gafde0a91566f74d38cdffe80c6635576d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga175d1a1ba8628a632a1b39701f3de7d1"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___tx_p_i_d_module.html#ga175d1a1ba8628a632a1b39701f3de7d1">TELEMETRY_UPDATE_PERIOD_MS</a>&#160;&#160;&#160;0</td></tr>
<tr class="separator:ga175d1a1ba8628a632a1b39701f3de7d1"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:gaf8393d7267577ee01fd7083983d03bfb"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___tx_p_i_d_module.html#gaf8393d7267577ee01fd7083983d03bfb">updatePIDs</a> (<a class="el" href="struct_u_a_v_obj_event.html">UAVObjEvent</a> *ev, void *ctx, void *obj, int len)</td></tr>
<tr class="separator:gaf8393d7267577ee01fd7083983d03bfb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gad434c53f893938120c31f3ce7b017acd"><td class="memItemLeft" align="right" valign="top">static bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___tx_p_i_d_module.html#gad434c53f893938120c31f3ce7b017acd">update</a> (float *var, float val)</td></tr>
<tr class="separator:gad434c53f893938120c31f3ce7b017acd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga47fed6b71ab116ec23b0c64ff8a3fbb6"><td class="memItemLeft" align="right" valign="top">static float&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___tx_p_i_d_module.html#ga47fed6b71ab116ec23b0c64ff8a3fbb6">scale</a> (float val, float inMin, float inMax, float outMin, float outMax)</td></tr>
<tr class="separator:ga47fed6b71ab116ec23b0c64ff8a3fbb6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga25f9f8de3b52c6d5d765abc545cdf923"><td class="memItemLeft" align="right" valign="top">int32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___tx_p_i_d_module.html#ga25f9f8de3b52c6d5d765abc545cdf923">TxPIDInitialize</a> (void)</td></tr>
<tr class="separator:ga25f9f8de3b52c6d5d765abc545cdf923"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga471c809fc3395bf53e4c6b7888434d08"><td class="memItemLeft" align="right" valign="top">static int32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___tx_p_i_d_module.html#ga471c809fc3395bf53e4c6b7888434d08">TxPIDStart</a> (void)</td></tr>
<tr class="separator:ga471c809fc3395bf53e4c6b7888434d08"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gadd0b157bff40a18f9445afc7813be646"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___tx_p_i_d_module.html#gadd0b157bff40a18f9445afc7813be646">MODULE_INITCALL</a> (<a class="el" href="group___tx_p_i_d_module.html#ga25f9f8de3b52c6d5d765abc545cdf923">TxPIDInitialize</a>, <a class="el" href="group___tx_p_i_d_module.html#ga471c809fc3395bf53e4c6b7888434d08">TxPIDStart</a>)</td></tr>
<tr class="separator:gadd0b157bff40a18f9445afc7813be646"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:ga9d103b6f46786f9f733ff608ffcb99d5"><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="structtxpid__struct.html">txpid_struct</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___tx_p_i_d_module.html#ga9d103b6f46786f9f733ff608ffcb99d5">txpid_data</a></td></tr>
<tr class="separator:ga9d103b6f46786f9f733ff608ffcb99d5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga80072bd0c1ddc10b66d3fecb7a5982df"><td class="memItemLeft" align="right" valign="top">uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___tx_p_i_d_module.html#ga80072bd0c1ddc10b66d3fecb7a5982df">update</a></td></tr>
<tr class="separator:ga80072bd0c1ddc10b66d3fecb7a5982df"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<h2 class="groupheader">Macro Definition Documentation</h2>
<a class="anchor" id="gafde0a91566f74d38cdffe80c6635576d"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define SAMPLE_PERIOD_MS&#160;&#160;&#160;200</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Output object: StabilizationSettings</p>
<p>This module will periodically update values of stabilization PID settings depending on configured input control channels. New values of stabilization settings are not saved to flash, but updated in RAM. It is expected that the module will be enabled only for tuning. When desired values are found, they can be read via GCS and saved permanently. Then this module should be disabled again.</p>
<p>UAVObjects are automatically generated by the UAVObjectGenerator from the object definition XML file. </p>

<p>Definition at line <a class="el" href="txpid_8c_source.html#l00066">66</a> of file <a class="el" href="txpid_8c_source.html">txpid.c</a>.</p>

</div>
</div>
<a class="anchor" id="ga175d1a1ba8628a632a1b39701f3de7d1"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define TELEMETRY_UPDATE_PERIOD_MS&#160;&#160;&#160;0</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="txpid_8c_source.html#l00067">67</a> of file <a class="el" href="txpid_8c_source.html">txpid.c</a>.</p>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="gadd0b157bff40a18f9445afc7813be646"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">MODULE_INITCALL </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group___tx_p_i_d_module.html#ga25f9f8de3b52c6d5d765abc545cdf923">TxPIDInitialize</a>&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group___tx_p_i_d_module.html#ga471c809fc3395bf53e4c6b7888434d08">TxPIDStart</a>&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="ga47fed6b71ab116ec23b0c64ff8a3fbb6"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static float scale </td>
          <td>(</td>
          <td class="paramtype">float&#160;</td>
          <td class="paramname"><em>val</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">float&#160;</td>
          <td class="paramname"><em>inMin</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">float&#160;</td>
          <td class="paramname"><em>inMax</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">float&#160;</td>
          <td class="paramname"><em>outMin</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">float&#160;</td>
          <td class="paramname"><em>outMax</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Scales input val from [inMin..inMax] range to [outMin..outMax]. If val is out of input range (inMin &lt;= inMax), it will be bound. (outMin &gt; outMax) is ok, in that case output will be decreasing.</p>
<dl class="section return"><dt>Returns</dt><dd>scaled value </dd></dl>

<p>Definition at line <a class="el" href="txpid_8c_source.html#l00437">437</a> of file <a class="el" href="txpid_8c_source.html">txpid.c</a>.</p>

</div>
</div>
<a class="anchor" id="ga25f9f8de3b52c6d5d765abc545cdf923"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int32_t TxPIDInitialize </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Initialise the module, called on startup </p>
<dl class="section return"><dt>Returns</dt><dd>0 on success or -1 if initialisation failed </dd></dl>

<p>Definition at line <a class="el" href="txpid_8c_source.html#l00101">101</a> of file <a class="el" href="txpid_8c_source.html">txpid.c</a>.</p>

</div>
</div>
<a class="anchor" id="ga471c809fc3395bf53e4c6b7888434d08"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int32_t TxPIDStart </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Module start routine automatically called after initialization routine </p>
<dl class="section return"><dt>Returns</dt><dd>0 when was successful </dd></dl>

<p>Definition at line <a class="el" href="txpid_8c_source.html#l00142">142</a> of file <a class="el" href="txpid_8c_source.html">txpid.c</a>.</p>

</div>
</div>
<a class="anchor" id="gad434c53f893938120c31f3ce7b017acd"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static bool update </td>
          <td>(</td>
          <td class="paramtype">float *&#160;</td>
          <td class="paramname"><em>var</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">float&#160;</td>
          <td class="paramname"><em>val</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Updates var using val if needed. </p>
<dl class="section return"><dt>Returns</dt><dd>1 if updated, 0 otherwise </dd></dl>

<p>Definition at line <a class="el" href="txpid_8c_source.html#l00464">464</a> of file <a class="el" href="txpid_8c_source.html">txpid.c</a>.</p>

</div>
</div>
<a class="anchor" id="gaf8393d7267577ee01fd7083983d03bfb"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void updatePIDs </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_u_a_v_obj_event.html">UAVObjEvent</a> *&#160;</td>
          <td class="paramname"><em>ev</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>ctx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>obj</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>len</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Update PIDs callback function </p>

<p>Definition at line <a class="el" href="txpid_8c_source.html#l00181">181</a> of file <a class="el" href="txpid_8c_source.html">txpid.c</a>.</p>

</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a class="anchor" id="ga9d103b6f46786f9f733ff608ffcb99d5"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structtxpid__struct.html">txpid_struct</a>* txpid_data</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="txpid_8c_source.html#l00090">90</a> of file <a class="el" href="txpid_8c_source.html">txpid.c</a>.</p>

</div>
</div>
<a class="anchor" id="ga80072bd0c1ddc10b66d3fecb7a5982df"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static bool update</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Updates var using val if needed. </p>
<dl class="section return"><dt>Returns</dt><dd>1 if updated, 0 otherwise </dd></dl>

<p>Definition at line <a class="el" href="msp__messages_8h_source.html#l00098">98</a> of file <a class="el" href="msp__messages_8h_source.html">msp_messages.h</a>.</p>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.6 </li>
  </ul>
</div>
</body>
</html>
